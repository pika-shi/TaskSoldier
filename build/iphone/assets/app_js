// name space
var app = {};

// connect database
con = Ti.Database.open('task');

// create tab group
var tabGroup = Ti.UI.createTabGroup();

// background service for notification
var service = Ti.App.iOS.registerBackgroundService({
	url : './include/notification.js'
});

// log
Ti.include('./include/log.js');
// addtask
Ti.include('./include/addtask.js');
// taskdetail
Ti.include('./include/taskdetail.js');
// tasklist
Ti.include('./include/tasklist.js');
// timer
Ti.include('./include/timer.js');
// config
Ti.include('./include/config.js');
// db
Ti.include('./include/db.js');

// call objects
// var LogTab = app.log.createTab();
var TaskListTab = app.tasklist.createTab();
var ConfigTab = app.config.createTab();

// create win
var logWin = Ti.UI.createWindow({
	title : 'ログ',
	barColor : '#87CEEB',
	backgroundImage : 'back.png'
});
// create tab
var logTab = Ti.UI.createTab({
	icon : 'log.png',
	title : 'ログ',
	window : logWin
});

var logView = {};
logView = app.log.createView(logTab);
logWin.add(logView);

// add tabs
tabGroup.addTab(TaskListTab);
tabGroup.addTab(logTab);
tabGroup.addTab(ConfigTab);
tabGroup.addEventListener('focus', function(e) {
	if (e.index == 1) {
		logWin.remove(logView);
		logView = app.log.createView(logTab);
		logWin.add(logView);
	}
});

// open tab group
tabGroup.open();
