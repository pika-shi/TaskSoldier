var optionPickerDialog=(function(){var e,doneFlag,callbackOnClose,isControlsCreated=false;var containerViewOpenAnimation,containerViewCloseAnimation,cancelButton;var doneButton,flexibleSpace,toolbar,picker,containerView,coverView;function createControls(){if(isControlsCreated){return;}
coverViewOpenAnimation=Ti.UI.createAnimation({opacity:0.5});coverViewCloseAnimation=Ti.UI.createAnimation({opacity:0});containerViewOpenAnimation=Ti.UI.createAnimation({bottom:0});containerViewCloseAnimation=Ti.UI.createAnimation({bottom:-251});cancelButton=Ti.UI.createButton({title:'Cancel',style:Ti.UI.iPhone.SystemButtonStyle.BORDERED});cancelButton.addEventListener('click',function(){e.cancel=true;api.close();});doneButton=Ti.UI.createButton({title:'Done',style:Ti.UI.iPhone.SystemButtonStyle.DONE});doneButton.addEventListener('click',function(){e.done=true;Ti.API.info(e.value);doneFlag=true;api.close();});flexibleSpace=Ti.UI.createButton({systemButton:Ti.UI.iPhone.SystemButton.FLEXIBLE_SPACE});toolbar=Ti.UI.iOS.createToolbar({bottom:208,items:[cancelButton,flexibleSpace,doneButton]});var value=new Date();value.getYear();value.getMonth();value.getDate();picker=Ti.UI.createPicker({type:Ti.UI.PICKER_TYPE_DATE_AND_TIME,bottom:0,selectionIndicator:true,value:value});picker.addEventListener('change',function(ee)
{e.value=ee.value.toString();});containerView=Ti.UI.createView({height:251,bottom:-251,zIndex:9});containerView.add(toolbar);containerView.add(picker);AddTaskWin.add(containerView);coverView=Ti.UI.createView({height:'100%',width:'100%',backgroundColor:'#000',opacity:0,zIndex:8});AddTaskWin.add(coverView);isControlsCreated=true;}
var api={};api.getPicker=function(){return picker;};api.open=function(){if(doneFlag){e={cancel:false,done:false,value:e.value};}else{var currentDate=new Date();currentDate.getYear();currentDate.getMonth();currentDate.getDate();e={cancel:false,done:false,value:currentDate.toString()};}
createControls();coverView.animate(coverViewOpenAnimation);containerView.animate(containerViewOpenAnimation);};api.close=function(){coverView.animate(coverViewCloseAnimation);containerView.animate(containerViewCloseAnimation);if(callbackOnClose){callbackOnClose(e);}};api.setData=function(data){var i=0,len,property,row,rows=[],dataLength=data.length;createControls();if(picker.columns[0]){len=picker.columns[0].rowCount;for(i=len-1;i>=0;i--){picker.columns[0].removeRow(picker.columns[0].rows[i]);}}
for(i=0;i<dataLength;i++){row=Ti.UI.createPickerRow();for(property in data[i]){if(Object.prototype.hasOwnProperty.call(data[i],property)){row[property]=data[i][property];}}
rows.push(row);}
picker.add(rows);};api.addEventListener=function(eventName,callback){if(eventName=='close'){callbackOnClose=callback;}};return api;}());